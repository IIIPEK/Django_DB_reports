{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Мои отчёты</h2>
    <form method="get" class="input-group mb-3">
        <input type="text" class="form-control" name="q" placeholder="Поиск..." value="{{ query }}">
        <button type="submit" class="btn btn-outline-primary">Найти</button>
    </form>

    <a href="{% url 'main:report_add' %}" class="btn btn-primary mb-3">
        <i class="bi bi-plus-circle"></i> Новый отчёт
    </a>
    <ul class="list-group mb-4">
        {% for report in reports %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>{{ report.title }}</div>
            <div>
                <a href="{% url 'main:report_edit' report.pk %}" class="btn btn-sm btn-outline-secondary">Редактировать</a>
                <a href="{% url 'main:report_delete' report.pk %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Удалить отчёт?');">Удалить</a>
            </div>
        </li>
        {% empty %}
        <li class="list-group-item">Нет отчётов</li>
        {% endfor %}
    </ul>

    <h2>Оповещения</h2>
    <a href="{% url 'main:alert_add' %}" class="btn btn-secondary mb-3">
        <i class="bi bi-alarm"></i> Новое оповещение
    </a>
    <ul class="list-group">
        {% for alert in alerts %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>{{ alert.title }} <small class="text-muted">({{ alert.report.title }})</small></div>
            <div>
                <a href="{% url 'main:alert_edit' alert.pk %}" class="btn btn-sm btn-outline-secondary">Редактировать</a>
                <a href="{% url 'main:alert_delete' alert.pk %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Удалить оповещение?');">Удалить</a>
            </div>
        </li>
        {% empty %}
        <li class="list-group-item">Нет оповещений</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
